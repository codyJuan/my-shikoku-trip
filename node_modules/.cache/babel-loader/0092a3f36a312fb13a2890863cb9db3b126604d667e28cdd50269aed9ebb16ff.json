{"ast":null,"code":"import{useState}from\"react\";import foodData from\"../data/foodData\";import{useKeenSlider}from\"keen-slider/react\";import{ChevronLeft,ChevronRight}from\"lucide-react\";import Lightbox from\"yet-another-react-lightbox\";import\"keen-slider/keen-slider.min.css\";import\"yet-another-react-lightbox/styles.css\";// 類別與 emoji 對應\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const typeMap={拉麵:\"🍜\",烏龍麵:\"🍥\",冰品:\"🍦\"};const allowedTypes=[\"拉麵\",\"烏龍麵\",\"冰品\"];export default function FoodForDay(_ref){let{date}=_ref;const foods=foodData.filter(f=>f.days.includes(date)).map(f=>({...f,displayType:allowedTypes.includes(f.type)?f.type:\"其他\"}));if(foods.length===0)return null;return/*#__PURE__*/_jsxs(\"section\",{className:\"max-w-5xl mx-auto px-4 mt-12 font-serif text-[#504339]\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"\\uD83C\\uDF71 \\u7576\\u5929\\u5403\\u4E86\\u9019\\u4E9B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-6 sm:grid-cols-2 md:grid-cols-3\",children:foods.map(food=>/*#__PURE__*/_jsx(FoodCard,{food:food},food.id))})]});}function FoodCard(_ref2){let{food}=_ref2;const[currentSlide,setCurrentSlide]=useState(0);const[lightboxOpen,setLightboxOpen]=useState(false);const[sliderRef,instanceRef]=useKeenSlider({loop:true,slides:{perView:1,spacing:10},slideChanged(slider){setCurrentSlide(slider.track.details.rel);}});const parsedImages=(food.images||[food.image]).map(img=>typeof img===\"string\"?{src:img}:img);const hasMultipleImages=parsedImages.length>1;return/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white p-4 rounded-xl shadow overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"absolute -top-3 -right-3 z-10 bg-white/90 text-xs px-3 py-1 rounded-full text-gray-700 shadow\",children:[typeMap[food.displayType]||\"🍴\",\" \",food.displayType]}),/*#__PURE__*/_jsx(\"div\",{ref:sliderRef,className:\"keen-slider overflow-hidden rounded\",children:parsedImages.map((img,idx)=>{var _img$position;return/*#__PURE__*/_jsx(\"div\",{className:\"keen-slider__slide\",children:/*#__PURE__*/_jsx(\"img\",{src:img.src,alt:`${food.name} ${idx+1}`,className:\"w-full h-48 sm:h-40 object-cover cursor-pointer\",style:{objectPosition:`center ${100-((_img$position=img.position)!==null&&_img$position!==void 0?_img$position:50)}%`},onClick:()=>setLightboxOpen(true)})},idx);})}),hasMultipleImages&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _instanceRef$current;return(_instanceRef$current=instanceRef.current)===null||_instanceRef$current===void 0?void 0:_instanceRef$current.prev();},className:\"absolute top-1/2 left-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _instanceRef$current2;return(_instanceRef$current2=instanceRef.current)===null||_instanceRef$current2===void 0?void 0:_instanceRef$current2.next();},className:\"absolute top-1/2 right-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\",children:/*#__PURE__*/_jsx(ChevronRight,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1 z-10\",children:parsedImages.map((_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _instanceRef$current3;return(_instanceRef$current3=instanceRef.current)===null||_instanceRef$current3===void 0?void 0:_instanceRef$current3.moveToIdx(i);},className:`w-2 h-2 rounded-full ${currentSlide===i?\"bg-[#504339]\":\"bg-gray-300\"}`},i))})]})]}),/*#__PURE__*/_jsx(Lightbox,{open:lightboxOpen,close:()=>setLightboxOpen(false),index:currentSlide,slides:parsedImages.map(img=>({src:img.src}))}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-lg font-semibold\",children:food.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:food.description}),food.location&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:[\"\\uD83D\\uDCCD \",food.location]}),food.googleMapUrl&&/*#__PURE__*/_jsx(\"a\",{href:food.googleMapUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-xs text-blue-600 hover:underline\",children:\"\\u5728 Google \\u5730\\u5716\\u67E5\\u770B \\u2192\"})]});}","map":{"version":3,"names":["useState","foodData","useKeenSlider","ChevronLeft","ChevronRight","Lightbox","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","typeMap","拉麵","烏龍麵","冰品","allowedTypes","FoodForDay","_ref","date","foods","filter","f","days","includes","map","displayType","type","length","className","children","food","FoodCard","id","_ref2","currentSlide","setCurrentSlide","lightboxOpen","setLightboxOpen","sliderRef","instanceRef","loop","slides","perView","spacing","slideChanged","slider","track","details","rel","parsedImages","images","image","img","src","hasMultipleImages","ref","idx","_img$position","alt","name","style","objectPosition","position","onClick","_instanceRef$current","current","prev","size","_instanceRef$current2","next","_","i","_instanceRef$current3","moveToIdx","open","close","index","description","location","googleMapUrl","href","target"],"sources":["/Users/phjuan/Desktop/my-shikoku-trip/src/components/FoodForDay.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport foodData from \"../data/foodData\";\nimport { useKeenSlider } from \"keen-slider/react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport Lightbox from \"yet-another-react-lightbox\";\nimport \"keen-slider/keen-slider.min.css\";\nimport \"yet-another-react-lightbox/styles.css\";\n\n// 類別與 emoji 對應\nconst typeMap = {\n  拉麵: \"🍜\",\n  烏龍麵: \"🍥\",\n  冰品: \"🍦\",\n};\nconst allowedTypes = [\"拉麵\", \"烏龍麵\", \"冰品\"];\n\nexport default function FoodForDay({ date }) {\n  const foods = foodData\n    .filter((f) => f.days.includes(date))\n    .map((f) => ({\n      ...f,\n      displayType: allowedTypes.includes(f.type) ? f.type : \"其他\",\n    }));\n\n  if (foods.length === 0) return null;\n\n  return (\n    <section className=\"max-w-5xl mx-auto px-4 mt-12 font-serif text-[#504339]\">\n      <h2 className=\"text-2xl font-bold mb-4\">🍱 當天吃了這些</h2>\n      <div className=\"grid gap-6 sm:grid-cols-2 md:grid-cols-3\">\n        {foods.map((food) => (\n          <FoodCard key={food.id} food={food} />\n        ))}\n      </div>\n    </section>\n  );\n}\n\nfunction FoodCard({ food }) {\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n\n  const [sliderRef, instanceRef] = useKeenSlider({\n    loop: true,\n    slides: { perView: 1, spacing: 10 },\n    slideChanged(slider) {\n      setCurrentSlide(slider.track.details.rel);\n    },\n  });\n\n  const parsedImages = (food.images || [food.image]).map((img) =>\n    typeof img === \"string\" ? { src: img } : img\n  );\n  const hasMultipleImages = parsedImages.length > 1;\n\n  return (\n    <div className=\"relative bg-white p-4 rounded-xl shadow overflow-hidden\">\n      <div className=\"relative\">\n        <span className=\"absolute -top-3 -right-3 z-10 bg-white/90 text-xs px-3 py-1 rounded-full text-gray-700 shadow\">\n          {typeMap[food.displayType] || \"🍴\"} {food.displayType}\n        </span>\n\n        <div ref={sliderRef} className=\"keen-slider overflow-hidden rounded\">\n          {parsedImages.map((img, idx) => (\n            <div key={idx} className=\"keen-slider__slide\">\n              <img\n                src={img.src}\n                alt={`${food.name} ${idx + 1}`}\n                className=\"w-full h-48 sm:h-40 object-cover cursor-pointer\"\n                style={{ objectPosition: `center ${100 - (img.position ?? 50)}%` }}\n                onClick={() => setLightboxOpen(true)}\n              />\n            </div>\n          ))}\n        </div>\n\n        {hasMultipleImages && (\n          <>\n            <button\n              onClick={() => instanceRef.current?.prev()}\n              className=\"absolute top-1/2 left-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\"\n            >\n              <ChevronLeft size={20} />\n            </button>\n            <button\n              onClick={() => instanceRef.current?.next()}\n              className=\"absolute top-1/2 right-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\"\n            >\n              <ChevronRight size={20} />\n            </button>\n            <div className=\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1 z-10\">\n              {parsedImages.map((_, i) => (\n                <button\n                  key={i}\n                  onClick={() => instanceRef.current?.moveToIdx(i)}\n                  className={`w-2 h-2 rounded-full ${\n                    currentSlide === i ? \"bg-[#504339]\" : \"bg-gray-300\"\n                  }`}\n                />\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n\n      <Lightbox\n        open={lightboxOpen}\n        close={() => setLightboxOpen(false)}\n        index={currentSlide}\n        slides={parsedImages.map((img) => ({ src: img.src }))}\n      />\n\n      <h3 className=\"mt-2 text-lg font-semibold\">{food.name}</h3>\n      <p className=\"text-sm text-gray-600 mb-1\">{food.description}</p>\n      {food.location && (\n        <p className=\"text-xs text-gray-500 mb-1\">📍 {food.location}</p>\n      )}\n      {food.googleMapUrl && (\n        <a\n          href={food.googleMapUrl}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-xs text-blue-600 hover:underline\"\n        >\n          在 Google 地圖查看 →\n        </a>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}