{"ast":null,"code":"import{useState}from\"react\";import foodData from\"../data/foodData\";import{useKeenSlider}from\"keen-slider/react\";import{ChevronLeft,ChevronRight}from\"lucide-react\";import Lightbox from\"yet-another-react-lightbox\";import\"keen-slider/keen-slider.min.css\";import\"yet-another-react-lightbox/styles.css\";// 類別限定\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const categories=[\"全部\",\"拉麵\",\"烏龍麵\",\"冰品\",\"其他\"];const typeMap={拉麵:\"🍜\",烏龍麵:\"🍥\",冰品:\"🍦\"};export default function Food(){const[selected,setSelected]=useState(\"全部\");const filtered=foodData.map(f=>({...f,displayType:categories.includes(f.type)?f.type:\"其他\"})).filter(f=>selected===\"全部\"||f.displayType===selected);return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto pt-20 px-4 py-12 font-serif text-[#504339]\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"\\uD83C\\uDF7D\\uFE0F \\u56DB\\u570B\\u7F8E\\u98DF\\u7E3D\\u89BD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex overflow-x-auto whitespace-nowrap gap-3 mb-6 pb-1\",children:categories.map(cat=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setSelected(cat),className:`px-4 py-1 rounded-full border shrink-0 ${selected===cat?\"bg-[#504339] text-white\":\"text-[#504339] border-[#ccc]\"}`,children:[typeMap[cat]||\"🍴\",\" \",cat]},cat))}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-6 sm:grid-cols-2 md:grid-cols-3\",children:filtered.map(food=>/*#__PURE__*/_jsx(FoodCard,{food:food},food.id))})]});}function FoodCard(_ref){let{food}=_ref;const[currentSlide,setCurrentSlide]=useState(0);const[lightboxOpen,setLightboxOpen]=useState(false);const[sliderRef,instanceRef]=useKeenSlider({loop:true,slides:{perView:1,spacing:10},slideChanged(slider){setCurrentSlide(slider.track.details.rel);}});const parsedImages=(food.images||[food.image]).map(img=>typeof img===\"string\"?{src:img}:img);const hasMultipleImages=parsedImages.length>1;return/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white p-4 rounded-xl shadow overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"absolute -top-3 -right-3 z-10 bg-white/90 text-xs px-3 py-1 rounded-full text-gray-700 shadow\",children:[typeMap[food.displayType]||\"🍴\",\" \",food.displayType]}),/*#__PURE__*/_jsx(\"div\",{ref:sliderRef,className:\"keen-slider overflow-hidden rounded\",children:parsedImages.map((img,idx)=>{var _img$position;return/*#__PURE__*/_jsx(\"div\",{className:\"keen-slider__slide\",children:/*#__PURE__*/_jsx(\"img\",{src:img.src,alt:`${food.name} ${idx+1}`,className:\"w-full h-48 sm:h-40 object-cover cursor-pointer\",style:{objectPosition:`center ${100-((_img$position=img.position)!==null&&_img$position!==void 0?_img$position:50)}%`},onClick:()=>setLightboxOpen(true)})},idx);})}),hasMultipleImages&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _instanceRef$current;return(_instanceRef$current=instanceRef.current)===null||_instanceRef$current===void 0?void 0:_instanceRef$current.prev();},className:\"absolute top-1/2 left-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _instanceRef$current2;return(_instanceRef$current2=instanceRef.current)===null||_instanceRef$current2===void 0?void 0:_instanceRef$current2.next();},className:\"absolute top-1/2 right-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\",children:/*#__PURE__*/_jsx(ChevronRight,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1 z-10\",children:parsedImages.map((_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _instanceRef$current3;return(_instanceRef$current3=instanceRef.current)===null||_instanceRef$current3===void 0?void 0:_instanceRef$current3.moveToIdx(i);},className:`w-2 h-2 rounded-full ${currentSlide===i?\"bg-[#504339]\":\"bg-gray-300\"}`},i))})]})]}),/*#__PURE__*/_jsx(Lightbox,{open:lightboxOpen,close:()=>setLightboxOpen(false),index:currentSlide,slides:parsedImages.map(img=>({src:img.src}))}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-lg font-semibold\",children:food.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:food.description}),food.location&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"\\uD83D\\uDCCD \",food.location]}),food.googleMapUrl&&/*#__PURE__*/_jsx(\"a\",{href:food.googleMapUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-xs text-blue-600 hover:underline\",children:\"\\u5728 Google \\u5730\\u5716\\u67E5\\u770B \\u2192\"})]});}","map":{"version":3,"names":["useState","foodData","useKeenSlider","ChevronLeft","ChevronRight","Lightbox","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","categories","typeMap","拉麵","烏龍麵","冰品","Food","selected","setSelected","filtered","map","f","displayType","includes","type","filter","className","children","cat","onClick","food","FoodCard","id","_ref","currentSlide","setCurrentSlide","lightboxOpen","setLightboxOpen","sliderRef","instanceRef","loop","slides","perView","spacing","slideChanged","slider","track","details","rel","parsedImages","images","image","img","src","hasMultipleImages","length","ref","idx","_img$position","alt","name","style","objectPosition","position","_instanceRef$current","current","prev","size","_instanceRef$current2","next","_","i","_instanceRef$current3","moveToIdx","open","close","index","description","location","googleMapUrl","href","target"],"sources":["/Users/phjuan/Desktop/my-shikoku-trip/src/pages/Food.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport foodData from \"../data/foodData\";\nimport { useKeenSlider } from \"keen-slider/react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport Lightbox from \"yet-another-react-lightbox\";\nimport \"keen-slider/keen-slider.min.css\";\nimport \"yet-another-react-lightbox/styles.css\";\n\n// 類別限定\nconst categories = [\"全部\", \"拉麵\", \"烏龍麵\", \"冰品\", \"其他\"];\nconst typeMap = {\n  拉麵: \"🍜\",\n  烏龍麵: \"🍥\",\n  冰品: \"🍦\",\n};\n\nexport default function Food() {\n  const [selected, setSelected] = useState(\"全部\");\n\n  const filtered = foodData\n    .map((f) => ({\n      ...f,\n      displayType: categories.includes(f.type) ? f.type : \"其他\",\n    }))\n    .filter((f) => selected === \"全部\" || f.displayType === selected);\n\n  return (\n    <div className=\"max-w-6xl mx-auto pt-20 px-4 py-12 font-serif text-[#504339]\">\n      <h1 className=\"text-3xl font-bold mb-6\">🍽️ 四國美食總覽</h1>\n\n      {/* 分類切換 */}\n      <div className=\"flex overflow-x-auto whitespace-nowrap gap-3 mb-6 pb-1\">\n        {categories.map((cat) => (\n          <button\n            key={cat}\n            onClick={() => setSelected(cat)}\n            className={`px-4 py-1 rounded-full border shrink-0 ${\n              selected === cat\n                ? \"bg-[#504339] text-white\"\n                : \"text-[#504339] border-[#ccc]\"\n            }`}\n          >\n            {typeMap[cat] || \"🍴\"} {cat}\n          </button>\n        ))}\n      </div>\n\n      {/* 卡片區 */}\n      <div className=\"grid gap-6 sm:grid-cols-2 md:grid-cols-3\">\n        {filtered.map((food) => (\n          <FoodCard key={food.id} food={food} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction FoodCard({ food }) {\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n\n  const [sliderRef, instanceRef] = useKeenSlider({\n    loop: true,\n    slides: { perView: 1, spacing: 10 },\n    slideChanged(slider) {\n      setCurrentSlide(slider.track.details.rel);\n    },\n  });\n\n  const parsedImages = (food.images || [food.image]).map((img) =>\n    typeof img === \"string\" ? { src: img } : img\n  );\n  const hasMultipleImages = parsedImages.length > 1;\n\n  return (\n    <div className=\"relative bg-white p-4 rounded-xl shadow overflow-hidden\">\n      <div className=\"relative\">\n        <span className=\"absolute -top-3 -right-3 z-10 bg-white/90 text-xs px-3 py-1 rounded-full text-gray-700 shadow\">\n          {typeMap[food.displayType] || \"🍴\"} {food.displayType}\n        </span>\n\n        <div ref={sliderRef} className=\"keen-slider overflow-hidden rounded\">\n          {parsedImages.map((img, idx) => (\n            <div key={idx} className=\"keen-slider__slide\">\n              <img\n                src={img.src}\n                alt={`${food.name} ${idx + 1}`}\n                className=\"w-full h-48 sm:h-40 object-cover cursor-pointer\"\n                style={{ objectPosition: `center ${100 - (img.position ?? 50)}%` }}\n                onClick={() => setLightboxOpen(true)}\n              />\n            </div>\n          ))}\n        </div>\n\n        {hasMultipleImages && (\n          <>\n            <button\n              onClick={() => instanceRef.current?.prev()}\n              className=\"absolute top-1/2 left-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\"\n            >\n              <ChevronLeft size={20} />\n            </button>\n            <button\n              onClick={() => instanceRef.current?.next()}\n              className=\"absolute top-1/2 right-2 transform -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-1 shadow\"\n            >\n              <ChevronRight size={20} />\n            </button>\n            <div className=\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1 z-10\">\n              {parsedImages.map((_, i) => (\n                <button\n                  key={i}\n                  onClick={() => instanceRef.current?.moveToIdx(i)}\n                  className={`w-2 h-2 rounded-full ${\n                    currentSlide === i ? \"bg-[#504339]\" : \"bg-gray-300\"\n                  }`}\n                />\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n\n      <Lightbox\n        open={lightboxOpen}\n        close={() => setLightboxOpen(false)}\n        index={currentSlide}\n        slides={parsedImages.map((img) => ({ src: img.src }))}\n      />\n\n      <h3 className=\"mt-2 text-lg font-semibold\">{food.name}</h3>\n      <p className=\"text-sm text-gray-600 mb-1\">{food.description}</p>\n      {food.location && (\n        <p className=\"text-xs text-gray-500\">📍 {food.location}</p>\n      )}\n      {food.googleMapUrl && (\n        <a\n          href={food.googleMapUrl}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-xs text-blue-600 hover:underline\"\n        >\n          在 Google 地圖查看 →\n        </a>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}